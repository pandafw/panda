function panda_call(a,b){switch(typeof(a)){case"function":a.call(b);break;case"string":a=new Function(a);a.call(b);break}}(function(d){function h(m,l,k){for(var j in l.types){m.removeClass(l.types[j])}m.addClass(l.types[k])}function c(l,k,j,o){if(o&&l.label){j=o+l.label+j}return d("<li>").addClass(l.texts[k]).append(d("<i>").addClass(l.icons[k])).append(d("<span>")[l.escape?"text":"html"](j))}function a(o,l,j,k){o.append(d("<ul>").addClass(l.css).append(c(l,k,j)));h(o,l,k)}function i(q,p,j,o){if(j){var r=d("<ul>").addClass(p.css);if(d.isArray(j)){for(var l=0;l<j.length;l++){r.append(c(p,o,j[l]))}}else{for(var u in j){var k=j[u];if(d.isArray(k)){for(var l=0;l<k.length;l++){r.append(c(p,o,k[l],u))}}else{r.append(c(p,o,k,u))}}}q.append(r);h(q,p,o)}}function b(j,w,l,u){if(l){for(var k in l){var r=j.find('input[name="'+k+'"]');if(r.length){r.closest(".form-group").addClass("has-error").find(".p-field-errors").remove();var o=d("<ul>").attr("errorfor",k).addClass(w.css).addClass("p-field-errors");var q=l[k];if(d.isArray(q)){for(var p=0;p<q.length;p++){o.append(c(w,u,q[p],k))}}else{o.append(c(w,u,q,k))}o.insertAfter(r)}}}}function g(p,o,j,l){if(typeof(j)=="string"){a(p,o,j,l||"info")}else{if(d.isArray(j)){for(var k=0;k<j.length;k++){if(typeof(j[k])=="string"){a(p,o,j[k],l||"info")}else{a(p,o,j[k].html,j[k].type)}}}else{if(j){if(j.params){if(l){b(d(l),o,j.params.errors,"error")}else{i(p,o,j.params.errors,"error")}}if(j.action){i(p,o,j.action.errors,"error");i(p,o,j.action.warnings,"warn");i(p,o,j.action.confirms,"help");i(p,o,j.action.messages,"info")}}}}}d.palert={css:"fa-ul",label:false,escape:true,icons:{down:"fa-caret-down",up:"fa-caret-up",info:"fa-li fa fa-info-circle",help:"fa-li fa fa-question-circle",warn:"fa-li fa fa-exclamation-triangle",error:"fa-li fa fa-exclamation-circle"},texts:{info:"text-success",help:"text-warning",warn:"text-warning",error:"text-danger"},types:{info:"alert-success",help:"alert-info",warn:"alert-warning",error:"alert-danger"}};var e=function(k,j){if(j){k.data("palert",j)}return{clear:function(){k.children(".alert").remove();return this},error:function(l){return this.add(l,"error")},warn:function(l){return this.add(l,"warn")},help:function(l){return this.add(l,"help")},info:function(l){return this.add(l,"info")},add:function(l,p){var q=d.extend({},k.data("palert"),d.palert);var o=false,r=k.children(".p-alert");if(r.size()<1){r=d("<div></div>").addClass("p-alert alert alert-dismissable fade in").css("display","none");o=true}g(r,q,l,p);if(o&&r.children().length){r.prepend('<button type="button" class="close" data-dismiss="alert">&times;</button>');k.prepend(r);r.slideDown()}return this},actionAlert:function(q,o){if(q.alerts){this.add(q.alerts,o);if(q.alerts.params&&!q.alerts.params.empty){this.error(d(f).data("ajaxInputError"))}}if(q.errors){this.add(q.errors,"error")}if(q.exception){var p=q.exception;var l=p.message+(p.stackTrace?("\n"+p.stackTrace):"");this.add(l,"error")}return this},ajaxJsonError:function(u,o,s,l){if(u&&u.responseJSON){var t=u.responseJSON;if(t&&(t.alerts||t.exception||t.errors)){return this.actionAlert(t)}}msg="";if(s){msg+=s+"\n"}if(u&&u.responseText){try{var q=JSON.parse(u.responseText);msg+=JSON.stringify(q,null,2)}catch(p){msg+=u.responseText}}return this.add(msg||l,"error")}}};d.fn.palert=function(k){var l=typeof k==="object"&&k;var j=Array.prototype.slice.call(arguments,1);return this.each(function(){var m=e(d(this),l);if(typeof k==="string"){m[k].apply(m,j)}})};d.palert.notify=function(j,k,o){o=d.extend({},d.palert,o);var l=d.extend({style:"palert"},d.palert.notifys);var p=d("<div>").addClass("p-alert alert");g(p,o,j,k);if(d.notify){if(!d.notify.getStyle("palert")){d.notify.addStyle("palert",{html:'<div data-notify-html="html"></div>'})}d.notify({html:p},l)}};d.palert.toggleFieldErrors=function(k){var m=d(k).closest(".p-field-errors-alert").next(".p-field-errors");var l=d.palert.icons.down;var j=d.palert.icons.up;if(m.is(":hidden")){m.slideDown();d(k).children("i").removeClass(l).addClass(j)}else{m.slideUp();d(k).children("i").removeClass(j).addClass(l)}return false}})(jQuery);(function(b){var a=function(c){c.hammer().on("swipeleft",function(d){b(this).data("bs.carousel").next();d.gesture.stopDetect()}).on("swiperight",function(d){b(this).data("bs.carousel").prev();d.gesture.stopDetect()})};b(window).on("load",function(){if(typeof(b.fn.hammer)=="function"){b('[data-ride="carousel"]').each(function(){a(b(this))})}})})(jQuery);(function(a){a(window).on("load",function(){a(".p-checkboxlist.order").removeClass("order").addClass("ordered").find(":checkbox").click(function(){var d=a(this);var c=d.closest("label");var b=d.closest(".p-checkboxlist").find("hr");c.fadeOut(function(){if(d.is(":checked")){c.insertBefore(b)}else{c.insertAfter(b)}c.fadeIn()})})})})(jQuery);(function(d){var c={};var b="div.p-datepicker, div.p-datetimepicker, div.p-timepicker";function a(){if(typeof(d.fn.datetimepicker)=="undefined"){setTimeout(a,100);return}for(var e in c){if(!d.fn.datetimepicker.dates[e]){setTimeout(a,100);return}}d(b).datetimepicker()}d(window).on("load",function(){var g=d(b);if(g.size()){var e=g.data("datetimepickerCss");if(e){d.jcss(e)}var h=g.data("datetimepickerJs");if(h){d.jscript(h,function(){g.each(function(){var k=d(this).data("language");var j=d(this).data("datetimepickerLangJs");if(k&&j&&!c[k]){d.jscript(j);c[k]=j}})})}a()}})})(jQuery);if(typeof(panda)=="undefined"){panda={}}(function(h){function b(){var j=h(this);var k=h("#"+j.attr("id")+"_alert").empty();j.find(".has-error").removeClass("has-error").end().find(".p-field-errors").remove();if(!j.isLoadMasked()){j.loadmask()}h.ajax({url:j.data("ajaxAction"),method:"post",data:j.serializeArray(),dataType:"json",success:function(l){k.palert("actionAlert",l,j);if(l.result){j.vals(l.result);j.find("div.p-datepicker, div.p-datetimepicker, div.p-timepicker").each(function(){var m=h(this).find("input").val();if(m){h(this).datetimepicker("setValue",new Date(m))}})}if(k.children().length){k.scrollIntoView()}},error:function(o,l,m){k.palert("ajaxJsonError",o,l,m,j.data("ajaxServerError"))},complete:function(){j.unloadmask()}});return false}function c(j){if(!j.data("ajaxSubmitHooked")&&j.data("ajaxAction")){j.data("ajaxSubmitHooked",true).submit(b)}}function i(j){var k=j.closest(".p-popup, .p-inner");var l=j.serializeArray();if(k.hasClass("p-inner")){l.push({name:"__inner",value:"true"})}else{l.push({name:"__popup",value:"true"})}if(j.attr("loadmask")!="false"){k.parent().loadmask()}h.ajax({url:j.attr("action"),data:l,dataType:"html",success:function(m,o,p){k.parent().html(m)},error:function(p,o,m){k.parent().html(p.responseText)},complete:function(o,m){k.parent().unloadmask()}})}function e(j){if(!j.data("actionHooked")){j.data("actionHooked",true).find("input[data-action], button[data-action]").click(function(){h(this).closest("form").attr("action",h(this).data("action"))})}}function a(j){var k=j.attr("target")||"_self";return k=="_self"||k=="_top"||k=="_parent"}function d(j){if(j.data("hooked")){return}var k=j.closest(".p-popup, .p-inner");if(k.length>0){j.data("hooked",true);j.submit(function(l){l.preventDefault();i(h(this));return false})}}function g(j){if(j.data("hooked")){return}if(j.height()>20&&j.attr("loadmask")!="false"){j.data("hooked",true);j.submit(function(){h(this).loadmask()})}}h(window).on("load",function(){h("form").each(function(){var j=h(this);e(j);if(a(j)){d(j);if(panda.enable_loadmask_form){g(j)}c(j)}})})})(jQuery);(function(b){var a={};function d(){b.extend(b.summernote.plugins,{media:function(g){var i=b.summernote.ui;var h=g.$note;g.memo("button.media",function(){function k(l){b.popup().hide();if(l){for(var m=0;m<l.length;m++){h.summernote("insertImage",l[m].href,l[m].name)}}}var j=i.button({contents:'<i class="'+(h.data("mediaIcon")||"fa fa-list-alt")+'"/>',tooltip:h.data("mediaText")||"Media Browser",click:function(){var l=h.data("mediaHref");var m=h.data("mediaPopupId");if(!m){m=(h.attr("id")||h.attr("name")||l.hashCode())+"_media_popup"}b.popup({id:m,url:l}).show({id:m,trigger:this,popover:true,onpopup:null,onhide:null,callback:k})}});return j.render()});this.destroy=function(){this.$panel.remove();this.$panel=null}}})}function c(){if(typeof(b.fn.summernote)=="undefined"){setTimeout(c,100);return}for(var g in a){if(!b.summernote.lang[g]){setTimeout(c,100);return}}d();b("textarea.p-htmleditor.p-summernote").each(function(){var t=b(this);var s={};var r=["toolbar","popover","fontNames","fontNamesIgnoreCheck"];for(var m=0;m<r.length;m++){var j=t.attr(r[m]);if(j){try{s[r[m]]=JSON.parse(j)}catch(q){}}}b.extend(s,t.data("summernoteOptions"));var h=t.data("summernoteLang");if(h){s.lang=h}if(t.attr("readonly")){t.parent().addClass("p-htmleditor-readonly");t.summernote(b.extend(s,{toolbar:false})).summernote("disable")}else{var k=["picture","video"];if(t.data("mediaHref")){k.push("media")}t.summernote(b.extend({height:t.attr("height"),followingToolbar:t.attr("followingToolbar")||false,toolbar:[["style",["style","fontname","fontsize","color"]],["text",["bold","italic","underline","strikethrough","superscript","subscript"]],["para",["paragraph","ol","ul"]],["insert",["hr","table","link"]],["media",k],["edit",["undo","redo","clear"]],["misc",["codeview","fullscreen","help"]],]},s))}})}function e(){if(typeof(b.fn.cleditor)=="undefined"){setTimeout(e,100);return}b("textarea.p-htmleditor.p-cleditor").cleditor()}b(window).on("load",function(){var j=b("textarea.p-htmleditor.p-summernote");if(j.size()){var h=j.data("summernoteCss");if(h){b.jcss(h)}var i=j.data("summernoteJs");if(i){b.jscript(i,function(){j.each(function(){var l=b(this).data("summernoteLang");var k=b(this).data("summernoteLangJs");if(l&&k&&!a[l]){b.jscript(k);a[l]=k}})})}c()}var g=b("textarea.p-htmleditor.p-cleditor");if(g.size()){var h=g.data("cleditorCss");if(h){b.jcss(h)}var i=g.data("cleditorJs");if(i){b.jscript(i,true)}e()}})})(jQuery);if(typeof(panda)=="undefined"){panda={}}panda.loading=function(a){$("body").loadmask({mask:false,fixed:true,timeout:a||1000})};panda.page_sort=function(b,a){panda.loading();location.href=$.addQueryParams(location.href,{"s.c":b,"s.d":a});return false};panda.page_sort_reverse=function(b,a){return panda.page_sort(b,a.toLowerCase()=="asc"?"desc":"asc")};panda.page_goto=function(a){panda.loading();location.href=$.addQueryParams(location.href,{"p.s":a});return false};panda.page_limit=function(a){panda.loading();location.href=$.addQueryParams(location.href,{"p.l":a});return false};function plv_options(d,a){var c=document.getElementById(d);for(var b in a){c[b]=a[b]}}function plv_getForm(a){return document.getElementById(a+"_form")}function plv_getBForm(a){return document.getElementById(a+"_bform")}function plv_submitBForm(e,c,d,a){$("#"+e).loadmask();var b=plv_getBForm(e);if(c){if(typeof(c)=="string"){b.action=c}else{if(!d){d=c}}}if(d){for(n in d){$('<input type="hidden" name="'+n+'"/>').val(d[n]).appendTo(b)}}b.target=a?a:"";b.submit();return false}function plv_submitCheckedRows(d,b,c,a){if(plv_enableCheckedValues(d)>0){plv_submitBForm(d,b,c,a)}return false}function plv_submitCheckedKeys(d,b,c,a){if(plv_enableCheckedKeys(d)>0){plv_submitBForm(d,b,c,a)}return false}function plv_enableCheckedValues(c,a){var b=0;$("#"+c+" .p-lv-tbody input.p-lv-cb").each(function(){if(this.checked){b++;if(a){$(this).closest("tr").find("input.p-lv-cv").each(function(){var d=_plv_getPropertyName(this.name);if(a==d||a.contains(d)){this.disabled=false}})}else{$(this).closest("tr").find("input.p-lv-cv").prop("disabled",false)}}else{$(this).closest("tr").find("input.p-lv-cv").prop("disabled",true)}});return b}function plv_enableCheckedKeys(b){var a=0;$("#"+b+" .p-lv-tbody input.p-lv-cb").each(function(){if(this.checked){a++}$(this).closest("tr").find("input.p-lv-ck").prop("disabled",!this.checked)});return a}function plv_getRowData(a){var b={};$(a).find("input.p-lv-cv").each(function(){var c=_plv_getPropertyName(this.name);b[c]=this.value});return b}function _plv_getPropertyName(b){var a=b.lastIndexOf(".");if(a>=0){b=b.substring(a+1)}return b}function plv_getTBodyRows(a){return $("#"+a+" .p-lv-tbody > tr")}function plv_checkAll(c,a){if(typeof(a)=="undefined"){a=true}var b=$("#"+c);_plv_setCheckAll(b,a,true)}function plv_checkRow(d,c,b){if(typeof(b)=="undefined"){b=true}var a=$("#"+d+" .p-lv-tbody > tr");_plv_selectRow(a.eq(c),b)}function _plv_init_table(d){d.find(".p-lv-thead > tr > th").each(function(){var e=$(this);if(e.hasClass("p-lv-sortable")){e.click(function(){_plv_sort(d.attr("id"),$(this).attr("column"))});if($.browser.msie&&$.browser.majorVersion<7){e.mouseenter(function(){$(this).addClass("p-lv-hover");return false}).mouseleave(function(){$(this).removeClass("p-lv-hover");return false})}}});var b=0;var c=0;var a=d.find(".p-lv-tbody");a.click(_plv_onTBodyClick).find("input.p-lv-cb").each(function(){_plv_selectRow($(this).closest("tr"),this.checked);if(this.checked){b++}else{c++}});if($.browser.msie&&$.browser.majorVersion<7){a.mouseover(_plv_onTBodyMouseOver).mouseout(_plv_onTBodyMouseOut)}d.find(".p-lv-thead input.p-lv-ca").click(_plv_onAllCheck).prop("checked",(b>0&&c==0))}function _plv_init(a){if(a.data("plistview")){return}a.data("plistview",true);_plv_init_table(a)}function _plv_sort(d,c){var b=document.getElementById(d+"_sort");if(b){$("#"+d).loadmask();var a=document.getElementById(d+"_dir");if(c==b.value){a.value=(a.value.toLowerCase()=="asc"?"desc":"asc")}else{b.value=c;a.value="asc"}document.getElementById(d+"_submit").click()}}function _plv_goto(d,b){$("#"+d).loadmask();document.getElementById(d+"_form").reset();document.getElementById(d+"_start").value=b;var c=document.getElementById(d+"_sort");if(c&&c.value==""){c.disabled=true}var a=document.getElementById(d+"_dir");if(a&&a.value==""){a.disabled=true}document.getElementById(d+"_submit").click();return false}function _plv_limit(b,a){$("#"+b).loadmask();document.getElementById(b+"_limit").value=a;document.getElementById(b+"_submit").click()}function _plv_selectRow(a,b){if(b){a.addClass("p-selected p-lv-selected").find("input.p-lv-cb").prop("checked",b)}else{a.removeClass("p-selected p-lv-selected").find("input.p-lv-cb").prop("checked",b)}}function _plv_toggleRow(c,b){var d=c.closest("div.p-lv");if(d.data("singleSelect")){if(c.hasClass("p-lv-selected")){if(b||!d.data("untoggleSelect")){_plv_selectRow(c,false)}}else{_plv_selectRow(d.find("tr.p-lv-selected"),false);_plv_selectRow(c,true)}}else{if(c.hasClass("p-lv-selected")){_plv_selectRow(c,false)}else{_plv_selectRow(c,true)}}var a=true;d.find(".p-lv-tbody input.p-lv-cb").each(function(){if(!this.checked){a=false;return false}});_plv_setCheckAll(d,a)}function _plv_setCheckAll(c,a,b){c.find(".p-lv-thead input.p-lv-ca").each(function(){this.checked=a;this.title=$(this).data(a?"selectNone":"selectAll")});c.find(".p-lv-cab").each(function(){var d=$(this);d.prop("checked",a).find("i").removeClass(d.data(a?"iconSelectAll":"iconSelectNone")).addClass(d.data(a?"iconSelectNone":"iconSelectAll")).get(0).nextSibling.data=" "+d.data(a?"textSelectNone":"textSelectAll")});if(b){c.find(".p-lv-tbody > tr").each(function(){_plv_selectRow($(this),a)})}}function _plv_onAllCheck(){var b=this.checked;var a=$(this).closest(".p-lv");_plv_setCheckAll(a,b,true)}function _plv_onAllClick(a){var d=!($(a).prop("checked")||false);var b=$(a).closest(".p-lv");_plv_setCheckAll(b,d,true)}function _plv_onTBodyClick(a){var e=$(a.target);if(e.prop("tagName")=="A"){return}var c=e.closest("tr");if(e.hasClass("p-lv-cb")){a.stopPropagation();_plv_toggleRow(c,true);return}if(c.size()>0){_plv_toggleRow(c);var d=c.closest("div.p-lv");var b=d.get(0).onrowclick||d.data("onrowclick");panda_call(b,c.get(0))}}function _plv_onTBodyMouseOver(a){$(a.target).closest("tr.p-lv-tr").addClass("ui-state-hover p-lv-hover");return false}function _plv_onTBodyMouseOut(a){$(a.target).closest("tr.p-lv-tr").removeClass("ui-state-hover p-lv-hover");return false}(function(a){a(window).on("load",function(){a("div.p-lv").each(function(){_plv_init(a(this))})})})(jQuery);if(typeof(panda)=="undefined"){panda={}}panda.meta_props=function(){var a={};$("meta").each(function(){var d=$(this);var b=d.attr("property");if(b&&b.startsWith("s:")){var c=d.attr("content");a[b.substring(2)]=c}});return a};(function(a){a(window).on("load",function(){a(".navbar-toggle").click(function(){a(this).toggleClass("active")})})})(jQuery);(function(a){a(window).on("load",function(){for(var b in window){if(b.startsWith("onPageLoad")&&typeof(window[b])=="function"){window[b]();window[b]=null}}})})(jQuery);(function(){function _click(evt){var $el=$(this);if($el.parent().hasClass("disabled")){evt.preventDefault()}else{var pn=$el.attr("pageno");if(pn>=0){var $pg=$el.closest(".p-pager");var js=$pg.data("click");if(js){js=js.replace("$",pn);js=js.replace("#",(pn-1)*$pg.data("limit"));if(eval(js)===false){evt.preventDefault()}}}}}function _setActivePage($p,n){var $u=$p.find("ul.pagination");$u.find("li.active").removeClass("active");var $n=$u.find("li.p-pager-page");var m=$p.data("pages");var b=n-Math.floor($n.size()/2);if(b+$n.size()>m){b=m-$n.size()+1}if(b<1){b=1}var s=$p.data("style");if(n>1){$u.find(".p-pager-first, .p-pager-prev").removeClass("hidden disabled");$u.find(".p-pager-prev>a").attr("pageno",n-1)}else{$u.find(".p-pager-first").addClass(s.contains("F")?"disabled":"hidden");$u.find(".p-pager-prev").addClass(s.contains("P")?"disabled":"hidden")}$u.find(".p-pager-ellipsis-left")[b>1?"removeClass":"addClass"]("hidden");$n.each(function(){var $a=$(this).find("a");$a.attr("pageno",b).text(b);if(b==n){$(this).addClass("active")}b++});$u.find(".p-pager-ellipsis-right")[b<=m?"removeClass":"addClass"]("hidden");if(n<m){$u.find(".p-pager-next, .p-pager-last").removeClass("hidden disabled");$u.find(".p-pager-next>a").attr("pageno",n+1)}else{$u.find(".p-pager-next").addClass(s.contains("N")?"disabled":"hidden");$u.find(".p-pager-last").addClass(s.contains("L")?"disabled":"hidden")}}$.fn.ppager=function(api,pno){if(api=="getActivePage"){return this.find("ul.pagination>li.active>a").attr("pageno")}if(api=="setActivePage"){return this.each(function(){_setActivePage($(this),pno)})}return this.each(function(){var $p=$(this);if($p.attr("ppager")!="true"){$p.attr("ppager","true");if($p.data("click")){$p.find("a[pageno]").click(_click)}}})};$(window).on("load",function(){$('[data-spy="ppager"]').ppager()})})();(function(){function a(b,d){var c=this.scrollLeft;this.scrollLeft-=(d*40);if(c!=this.scrollLeft){b.preventDefault()}}$(window).on("load",function(){$(".p-panel-hscroll .panel-body").each(function(){var b=$(this);if(b.data("pwheelpanel")){return}b.data("pwheelpanel",true).mousewheel(a)})})})();(function(g){function i(j){if(j.data("pqueryer")){return}j.data("pqueryer",true);h(j)}function h(j){j.find(".p-qr-filters").find(".form-group").each(function(){if(g(this).hasClass("p-hidden")){g(this).find("input,select,textarea").prop("disabled",true)}}).end().find(".p-qr-remove").click(b).end().find(".p-qr-clear").click(e).end().find(".p-qr-select").change(c).end().find(".p-qr-f-number-c, .p-qr-f-date-c, .p-qr-f-datetime-c, .p-qr-f-time-c").on("change",a).end().find("form").submit(function(){j.loadmask()})}function d(){switch(this.tagName){case"INPUT":switch(this.type){case"radio":if(this.name!="m"&&!this.name.endsWith(".m")){this.checked=false}break;case"checkbox":this.checked=false;break;case"text":this.value="";break}break;case"SELECT":if(!this.name.endsWith(".c")){this.selectedIndex=0}break;case"TEXTAREA":this.value="";break}}function a(){var j=g(this);if(j.val()=="bt"){j.nextAll().removeClass("p-hidden").find("INPUT").prop("disabled",false)}else{j.nextAll().addClass("p-hidden").find("INPUT").prop("disabled",true)}}function c(){var j=this;if(j.selectedIndex>0){g(j).closest(".p-qr-filters").find(".p-qr-fsi-"+j.value).removeClass("p-hidden").find("input,select,textarea").prop("disabled",false).end().end().fieldset("expand");j.options[j.selectedIndex].disabled=true;j.selectedIndex=0}return false}function b(){var j=g(this).closest(".form-group");j.addClass("p-hidden").find("input,select,textarea").prop("disabled",true).each(d).end().find(".p-label-error").removeClass("p-label-error").end().find(".p-field-errors").remove().end().closest(".p-qr-filters").find(".p-qr-select > option[value="+j.data("item")+"]").prop("disabled",false)}function e(){g(this).closest(".p-qr-form").find(".p-field-errors").remove().end().find(".p-label-error").removeClass("p-label-error").end().find("input,select,textarea").each(d);return false}g(window).on("load",function(){g("div.p-qr").each(function(){i(g(this))})})})(jQuery);(function(a){a(window).on("load",function(){var c=a(".p-totop");if(c.size()>0){c.click(function(){a("html,body").animate({scrollTop:0},"slow")});var b=a(window);b.scroll(function(){c[b.scrollTop()>b.height()?"show":"hide"]()})}})})(jQuery);(function(a){a.fn.ptrigger=function(b){b=a.extend({icon:"fa fa-remove"},b);return this.each(function(){var g=a(this);if(g.data("ptriggerHooked")){return}g.data("ptriggerHooked",true);var d=b.onclick||g.data("ptrigger");if(!d||d=="false"){return}var c=b.icon||g.data("ptrigger-icon");var e=a('<i class="p-trigger '+c+'"></i>');g.addClass("p-has-trigger");e.insertAfter(g).click(function(){if(d&&d!="true"&&d!=true){panda_call(d,g.get(0))}else{if(g.val()!=""){g.val("").trigger("change")}}})})};a(window).on("load",function(){a("[data-ptrigger]").ptrigger()})})(jQuery);(function(b){var a=function(){var d=document.createElement("div");return(("draggable" in d)||("ondragstart" in d&&"ondrop" in d))&&"FormData" in window&&"FileReader" in window}();var c=function(z){if(z.data("puploader")){return}z.data("puploader",true);var h=false;var o=0;var w=z.children(".p-uploader-file");var y=z.children(".p-uploader-btn");var m=z.children(".p-uploader-sep");var x=z.children(".p-uploader-error");var r=b('<div class="p-uploader-progress progress progress-striped" style="display: none"><div class="progress-bar progress-bar-info" style="width: 0%"></div></div>');r.insertAfter(y.length>0?y:w);if(x.length<1){x=b('<div class="p-uploader-error"></div>').insertAfter(r)}if(m.length<1){m=b('<div class="p-uploader-sep"></div>').insertAfter(x)}function v(D){var E=Number.formatSize(D);if(E.length>0){E="("+E+")"}return E}function C(G){var E=G.lastIndexOf("/");var D=G.lastIndexOf("\\");var F=E>D?E:D;return G.substr(F+1)}function t(K){var E=K.name,M=C(K.name),T=K.size,O=K.typ||"";var Q=z.data("dnloadLink");var N=z.data("dnloadName");var S=JSON.sparse(z.data("dnloadData"));var F=b("<div>").addClass("p-uploader-item").insertAfter(m);var J=b("<input>").attr("type","hidden").attr("name",z.data("name")).addClass("p-uploader-fid").appendTo(F);var R=b("<span>").addClass("p-uploader-text").appendTo(F);var I=b("<div>").addClass("p-uploader-image").appendTo(F);J.val(E||"");M=M||E||w.val();var G=null;if(Q&&E){var P=b.extend({},S);P[N]=E;G=Q+"?"+b.param(P)}var U=O.startsWith("image/");if(M){var L='<i class="fa fa-'+(U?"image":"paperclip")+' p-uploader-icon"></i> '+M+" "+v(T);if(G){b("<a>").attr("href",G).html(L).appendTo(R)}else{b("<span>").html(L).appendTo(R)}}b("<i>").addClass("p-uploader-remove fa fa-remove").click(q).appendTo(R);if(U&&G){var H=b("<a>").attr("href",G);var D=b("<img>").addClass("img-thumbnail").attr("src",G).appendTo(H);H.appendTo(I).fadeIn()}}function u(D){r.children(".progress-bar").css({width:D+"%"})}function q(){b(this).closest(".p-uploader-item").fadeOut(function(){b(this).remove()});x.empty()}function s(){h=true;o=0;(y.length?y:w).addClass("p-hidden");x.empty();u(0);r.show()}function p(){u(o++);if(o<90){setTimeout(p,20)}}function B(E){if(E.lengthComputable){var D=Math.round(E.loaded*100/E.total);u(D)}}function l(){u(100);r.hide();w.val("");(y.length?y:w).removeClass("p-hidden");h=false}function g(E){var D=z.data("onUploaded");if(typeof(window[D])=="function"){return window[D](E)}return false}function e(F){l();x.palert("actionAlert",F);if(F.success){if(g(F)){return}if(!w.attr("multiple")){z.children(".p-uploader-item").remove()}var E=F.result;if(b.isArray(E)){for(var D=0;D<E.length;D++){t(E[D])}}else{t(E)}}}function j(F,D,E){l();x.palert("error",(E?(E+""):(F?F.responseText:D)))}function i(){if(h||w.val()==""){return}if(a&&w[0].files){k(w[0].files)}else{A()}}function d(D){D.preventDefault();if(h){return}k(D.originalEvent.dataTransfer.files)}function A(){s();p();var D={};D[z.data("uploadName")]=w;b.ajaf({url:z.data("uploadLink"),data:JSON.sparse(z.data("uploadData")),file:D,dataType:"json",success:e,error:j})}function k(G){s();var F=new FormData();var D=JSON.sparse(z.data("uploadData"));if(D){for(var E in D){F.append(E,D[E])}}if(G){b.each(G,function(H,I){F.append(z.data("uploadName"),I)})}b.ajax({url:z.data("uploadLink"),type:"POST",data:F,dataType:"json",cache:false,contentType:false,processData:false,xhr:function(){var H=b.ajaxSettings.xhr();H.upload.addEventListener("progress",B);return H},success:e,error:j})}w.change(function(){setTimeout(i,10)});y.click(function(D){D.preventDefault();w.trigger("click");return false});if(a){z.addClass("p-uploader-draggable").on("drag dragstart dragend dragover dragenter dragleave drop",function(D){D.preventDefault();D.stopPropagation()}).on("dragover dragenter",function(){z.addClass("p-uploader-dragover")}).on("dragleave dragend drop",function(){z.removeClass("p-uploader-dragover")}).on("drop",d)}};b.fn.puploader=function(d){return this.each(function(){c(b(this))})};b(window).on("load",function(){b('[data-spy="puploader"]').puploader()})})(jQuery);(function(a){a(window).on("load",function(){a(".p-viewfield").prev("input").change(function(){var b=a(this).val();a(this).next(".p-viewfield").text(b==""?"\u3000":b)});a('.p-viewfield[data-format="html"]').each(function(){a('<a href="#" class="p-vf-code"><i class="fa fa-code"></i></a>').appendTo(a(this).parent())});a(".p-vf-code").click(function(){var d=a(this);var c=d.toggleClass("active").parent();var b=c.find("input").val();c.find(".p-viewfield")[d.hasClass("active")?"text":"html"](b);return false})})})(jQuery);